<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <title>Test Case: #</title> 
  <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script> 
  <style type="text/css">
code{
	font: 1em 'Courier New', Courier, Fixed, monospace;
    font-size : 100%;
    color: #000;
	background-color:#efefef;
    /*background : #fff url(http://www.estudiowas.com.ar/images/preback.jpg) no-repeat left top;*/
    overflow : auto;
    text-align:left;
    /*border : 1px solid #5581C0;*/
	padding : 3px;
    margin:1em 0 1em 0;
    line-height:20px;
    font-weight:normal!important;
	 }
 code, pre
 {
 background-color:#efefef;
 }


</style> 
 </head> 
 <body style="margin-left:200px; margin-right:0px; width:1000px"> 
 <h2>Q: How to check visibility of software keyboard in Android?</h2>
 <div>
 D: I need to do a very simple thing - find out if the software keyboard is shown. Is this possible in Android?
 </div>
  <form action="record.php" method="post"> 
   <h2>Test Case #18</h2> 
   <input type="hidden" name="tcase" id="tcase" value="18" /> 
   <hr /> 
   <h4>File ID: #4737265-0-cc</h4> 
   <input type="hidden" name="fileid" id="fileid" value="4737265-0-cc" /> 
   <hr /> 
   <pre class="prettyprint" id="codesegment">final View activityRootView = findViewById(R.id.root_view);
activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        int heightDiff = activityRootView.getRootView().getHeight() - activityRootView.getHeight();
        Log.d(TAG,&quot;TestKeyboardSandboxActivity.onCreate(...).new OnGlobalLayoutListener() {...}.onGlobalLayout() measured height::&quot; +activityRootView.getMeasuredHeight());
        Log.d(TAG,&quot;TestKeyboardSandboxActivity.onCreate(...).new OnGlobalLayoutListener() {...}.onGlobalLayout() Height::&quot; +activityRootView.getHeight());
        if (heightDiff &gt; 100) { // if more than 100 pixels, its probably a keyboard...
            relative.setVisibility(View.GONE);
        } else {
            relative.setVisibility(View.VISIBLE);
        }
    }
});
</pre> 
   <hr /> 
   <ol id="comments">
    <li>Hi, Your answer to this post helped me greatly but however, since listener gets called everytime(I do not know why.....) I can not do anything with the layout. For example, I inserted a Toast when Keyboard is showing then the Toast keeps on popping up which means listener is getting called all the time.... Is there anyway to stop this? Is this because I implemented listener on the activity not like the way you created it? </li>
    <li>Seems to be doing the trick. Also, if you do not know the root view's ID, here's how you can get the view: <code>`((ViewGroup) findViewById(android.R.id.content)).getChildAt(0)`</code> </li>
    <li>Beware that <code>`heightDiff`</code> will always include the height of the action bar. In the new answer that has been ignored by testing if that height is greater than some constant, but 100 pixels is not sufficient for xxhdpi devices such as the Nexus 4. Consider converting that value to DPs if you really want to use this hacky work-around. </li>
   </ol> 
   <hr /> 
   <strong>Comments Quality</strong> 
   <hr /> 
   <strong>Accurate?</strong>: 
   <input type="radio" name="accurate" id="a5" value="5" /> 
   <label for="a5">Strongly Agree</label> 
   <input type="radio" name="accurate" id="a4" value="4" /> 
   <label for="a5">Agree</label> 
   <input type="radio" name="accurate" id="a3" value="3" /> 
   <label for="a5">Neutral</label> 
   <input type="radio" name="accurate" id="a2" value="2" /> 
   <label for="a5">Disagree</label> 
   <input type="radio" name="accurate" id="a1" value="1" /> 
   <label for="a5">Strongly Disagree</label> 
   <br /> 
   <strong>Precise?</strong>: 
   <input type="radio" name="precise" id="p5" value="5" /> 
   <label for="a5">Strongly Agree</label> 
   <input type="radio" name="precise" id="p4" value="4" /> 
   <label for="a5">Agree</label> 
   <input type="radio" name="precise" id="p3" value="3" /> 
   <label for="a5">Neutral</label> 
   <input type="radio" name="precise" id="p2" value="2" /> 
   <label for="a5">Disagree</label> 
   <input type="radio" name="precise" id="p1" value="1" /> 
   <label for="a5">Strongly Disagree</label> 
   <br /> 
   <strong>Concise?</strong>: 
   <input type="radio" name="concise" id="c5" value="5" /> 
   <label for="a5">Strongly Agree</label> 
   <input type="radio" name="concise" id="c4" value="4" /> 
   <label for="a5">Agree</label> 
   <input type="radio" name="concise" id="c3" value="3" /> 
   <label for="a5">Neutral</label> 
   <input type="radio" name="concise" id="c2" value="2" /> 
   <label for="a5">Disagree</label> 
   <input type="radio" name="concise" id="c1" value="1" /> 
   <label for="a5">Strongly Disagree</label> 
   <br /> 
   <strong>Useful?</strong>: 
   <input type="radio" name="useful" id="u5" value="5" /> 
   <label for="a5">Strongly Agree</label> 
   <input type="radio" name="useful" id="u4" value="4" /> 
   <label for="a5">Agree</label> 
   <input type="radio" name="useful" id="u3" value="3" /> 
   <label for="a5">Neutral</label> 
   <input type="radio" name="useful" id="u2" value="2" /> 
   <label for="a5">Disagree</label> 
   <input type="radio" name="useful" id="u1" value="1" /> 
   <label for="a5">Strongly Disagree</label> 
   <hr /> 
   <input type="submit" name="submit" value="Submit Response" /> 
  </form>   
 </body>
</html>