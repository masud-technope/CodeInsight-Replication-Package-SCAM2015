<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <title>Test Case: #</title> 
  <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script> 
  <style type="text/css">
code{
	font: 1em 'Courier New', Courier, Fixed, monospace;
    font-size : 100%;
    color: #000;
	background-color:#efefef;
    /*background : #fff url(http://www.estudiowas.com.ar/images/preback.jpg) no-repeat left top;*/
    overflow : auto;
    text-align:left;
    /*border : 1px solid #5581C0;*/
	padding : 3px;
    margin:1em 0 1em 0;
    line-height:20px;
    font-weight:normal!important;
	 }
 code, pre
 {
 background-color:#efefef;
 }
</style> 
 </head> 
 <body style="margin-left:200px; margin-right:0px; width:1000px"> 
  <h2>Q: Restful API service</h2>
  <div>
  D: I'm looking to make a service which I can use to make calls to a web based rest api. I've spent a couple of days looking through stackoverflow.com, reading books and looking at articles whilst playing about with some code and I can't get anything which I'm happy with.
  <br /><br />

Basically I want to start a service on app init then I want to be able to ask that service to request a url and return the results. In the meantime I want to be able to display a progress window or something similar.
<br /><br />
I've created a service currently which uses IDL, I've read somewhere that you only really need this for cross app communication, so think these needs stripping out but unsure how to do callbacks without it. Also when I hit the post(Config.getURL("login"), values) the app seems to pause for a while (seems weird - thought the idea behind a service was that it runs on a different thread!)
<br />
More details (if needed): http://stackoverflow.com/questions/3197335/restful-api-service/
  </div>
  <form action="record.php" method="post"> 
   <h2>Test Case #10</h2> 
   <input type="hidden" name="tcase" id="tcase" value="10" /> 
   <hr /> 
   <h4>File ID: #3197456-1-cc</h4> 
   <input type="hidden" name="fileid" id="fileid" value="3197456-1-cc" /> 
   <hr /> 
   <pre class="prettyprint" id="codesegment">protected void onHandleIntent(Intent intent) {
    Log.i(TAG, &quot;Service started...&quot;);
    final ResultReceiver receiver = intent.getParcelableExtra(&quot;receiver&quot;);
    String command = intent.getStringExtra(&quot;command&quot;);
    Bundle b = new Bundle();
    if (command.equals(&quot;query&quot;)) {
        Log.i(TAG, &quot;serving query request&quot;);
        receiver.send(STATUS_RUNNING, Bundle.EMPTY);
        try {
// get some data or something
            Log.i(TAG, &quot;requesting Empty arrayList&quot;);
//Simulate downloading from the internet;
            Thread.sleep(2000);
            ArrayList
    <model>
      results = new ArrayList
     <model>
      (); Model hardkodiranModel =new Model(); hardkodiranModel.setTitle(&quot;Item, bozemski simnat od net&quot;); results.add(hardkodiranModel); Log.i(TAG, results.toString()); b.putParcelableArrayList(&quot;results&quot;, results); receiver.send(STATUS_FINISHED, b); } catch (Exception e) { Log.i(TAG, &quot;error in download&quot; + e.getMessage()); b.putString(Intent.EXTRA_TEXT, e.toString()); receiver.send(STATUS_ERROR, b); } } this.stopSelf(); } 
     </model>
    </model></pre> 
   <hr /> 
   <ol id="comments">
    <li>One small addition to the answer: as you do the mReceiver.setReceiver(null); in the onPause method, you should do the <code>mReceiver.setReceiver(this);</code> in the onResume method. Else you might not receive the events if your activity is resumed without being re-created </li>
    <li>Do not the docs say that you do not have to call stopSelf, since <code>IntentService</code> does that for you? </li>
    <li>A million up-votes. </li>
   </ol> 
   <hr /> 
   <strong>Comments Quality</strong> 
   <hr /> 
   <strong>Accurate?</strong>: 
   <input type="radio" name="accurate" id="a5" value="5" /> 
   <label for="a5">Strongly Agree</label> 
   <input type="radio" name="accurate" id="a4" value="4" /> 
   <label for="a5">Agree</label> 
   <input type="radio" name="accurate" id="a3" value="3" /> 
   <label for="a5">Neutral</label> 
   <input type="radio" name="accurate" id="a2" value="2" /> 
   <label for="a5">Disagree</label> 
   <input type="radio" name="accurate" id="a1" value="1" /> 
   <label for="a5">Strongly Disagree</label> 
   <br /> 
   <strong>Precise?</strong>: 
   <input type="radio" name="precise" id="p5" value="5" /> 
   <label for="a5">Strongly Agree</label> 
   <input type="radio" name="precise" id="p4" value="4" /> 
   <label for="a5">Agree</label> 
   <input type="radio" name="precise" id="p3" value="3" /> 
   <label for="a5">Neutral</label> 
   <input type="radio" name="precise" id="p2" value="2" /> 
   <label for="a5">Disagree</label> 
   <input type="radio" name="precise" id="p1" value="1" /> 
   <label for="a5">Strongly Disagree</label> 
   <br /> 
   <strong>Concise?</strong>: 
   <input type="radio" name="concise" id="c5" value="5" /> 
   <label for="a5">Strongly Agree</label> 
   <input type="radio" name="concise" id="c4" value="4" /> 
   <label for="a5">Agree</label> 
   <input type="radio" name="concise" id="c3" value="3" /> 
   <label for="a5">Neutral</label> 
   <input type="radio" name="concise" id="c2" value="2" /> 
   <label for="a5">Disagree</label> 
   <input type="radio" name="concise" id="c1" value="1" /> 
   <label for="a5">Strongly Disagree</label> 
   <br /> 
   <strong>Useful?</strong>: 
   <input type="radio" name="useful" id="u5" value="5" /> 
   <label for="a5">Strongly Agree</label> 
   <input type="radio" name="useful" id="u4" value="4" /> 
   <label for="a5">Agree</label> 
   <input type="radio" name="useful" id="u3" value="3" /> 
   <label for="a5">Neutral</label> 
   <input type="radio" name="useful" id="u2" value="2" /> 
   <label for="a5">Disagree</label> 
   <input type="radio" name="useful" id="u1" value="1" /> 
   <label for="a5">Strongly Disagree</label> 
   <hr /> 
   <input type="submit" name="submit" value="Submit Response" /> 
  </form>   
 </body>
</html>